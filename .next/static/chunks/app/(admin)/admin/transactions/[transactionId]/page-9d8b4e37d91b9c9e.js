(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8079],{52040:function(e,t,n){"use strict";var r,l;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(l=n.g.process)?void 0:l.env)?n.g.process:n(66003)},51381:function(e,t,n){Promise.resolve().then(n.bind(n,1213))},1213:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var r=n(9268),l=n(3338),s=n(17915),i=n(50447),o=n(56008),a=n(86006),c=n(68919),d=e=>{let{opened:t,onClose:n,transaction:d}=e,[u,h]=(0,a.useState)(!1),p=(0,o.useRouter)(),x=async()=>{try{h(!0);let{data:e}=await i.Z.delete("/api/admin/transactions/delete/".concat(d._id));if(e.error)throw Error(e.error);c.Am.success("".concat(d.title," Deleted")),p.push("/admin/transactions")}catch(e){c.Am.error(e.message)}finally{h(!1)}};return(0,r.jsx)(s.Z,{title:"Delete ".concat(d.title),opened:t,onClose:n,children:(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsx)("div",{children:"Are you sure you want to delete this transaction."}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(l.Z,{outline:!0,loading:u,label:"Yes",onClick:x}),(0,r.jsx)(l.Z,{label:"No",onClick:n})]})]})})},u=e=>{let{opened:t,onClose:n,transaction:d}=e,[u,h]=(0,a.useState)(!1);(0,o.useRouter)();let p=async()=>{try{h(!0);let{data:e}=await i.Z.patch("/api/admin/transactions/deposit/approve/".concat(d._id));if(e.error)throw Error(e.error);c.Am.success("".concat(d.title," Aproved")),n(),location.reload()}catch(e){c.Am.error(e.message)}finally{h(!1)}};return(0,r.jsx)(s.Z,{title:"Approve ".concat(d.title),opened:t,onClose:n,children:(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsx)("div",{children:"You want to Approve this transaction?"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(l.Z,{outline:!0,loading:u,label:"Yes",onClick:p}),(0,r.jsx)(l.Z,{label:"No",onClick:n})]})]})})},h=n(88001),p=e=>{let{opened:t,onClose:n,transaction:d}=e,[u,p]=(0,a.useState)(!1),x=(0,o.useRouter)(),[f,m]=(0,a.useState)("");(0,a.useEffect)(()=>{m(d.note||"")},[]);let v=async()=>{let e={transactionId:d._id,note:f};try{p(!0);let{data:t}=await i.Z.post("/api/admin/transactions/reject",e);if(t.error)throw Error(t.error);c.Am.success("".concat(d.title," rejected")),x.refresh(),n()}catch(e){c.Am.error(e.message)}finally{p(!1)}};return(0,r.jsx)(s.Z,{title:"Reject ".concat(d.title),opened:t,onClose:n,children:(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsx)("div",{children:"Are you sure you want to reject this transaction?"}),(0,r.jsx)(h.Z,{value:f,onChange:e=>m(e.target.value),placeholder:"Notes"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(l.Z,{outline:!0,loading:u,label:"Yes",onClick:v}),(0,r.jsx)(l.Z,{label:"No",onClick:n})]})]})})},x=e=>{let{opened:t,onClose:n,transaction:d}=e,[u,h]=(0,a.useState)(!1);(0,o.useRouter)();let p=async()=>{try{h(!0);let{data:e}=await i.Z.patch("/api/admin/transactions/loan/approve/".concat(d._id));if(e.error)throw Error(e.error);c.Am.success("".concat(d.title," Approved")),n(),location.reload()}catch(e){c.Am.error(e.message)}finally{h(!1)}};return(0,r.jsx)(s.Z,{title:"Approve ".concat(d.title),opened:t,onClose:n,children:(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsxs)("div",{children:["Do you want to approve this ",d.title," transaction?"]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(l.Z,{outline:!0,loading:u,label:"Yes",onClick:p}),(0,r.jsx)(l.Z,{label:"No",onClick:n})]})]})})},f=e=>{let{opened:t,onClose:n,transaction:d}=e,[u,h]=(0,a.useState)(!1);(0,o.useRouter)();let p=async()=>{try{h(!0);let{data:e}=await i.Z.patch("/api/admin/transactions/transfer/approve/".concat(d._id));if(e.error)throw Error(e.error);c.Am.success("".concat(d.title," Approved")),n(),location.reload()}catch(e){c.Am.error(e.message)}finally{h(!1)}};return(0,r.jsx)(s.Z,{title:"Approve ".concat(d.title),opened:t,onClose:n,children:(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsx)("div",{children:"Do you want to approve transaction?"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(l.Z,{outline:!0,loading:u,label:"Yes",onClick:p}),(0,r.jsx)(l.Z,{label:"No",onClick:n})]})]})})},m=n(22450),v=n(19799),j=n(41557),b=n(29577),y=n(82854),g=n(84821),w=n(32131),N=()=>{let{mode:e}=(0,m.Z)(),t=(0,o.useRouter)(),[n,s]=(0,a.useState)(),h=n&&(n.despositedAmount||0===n.despositedAmount),N=(0,o.useParams)().transactionId,{company:Z}=(0,w.Z)(),C=null==Z?void 0:Z.color.primaryLight,k=null==Z?void 0:Z.currency.symbol,[A,T]=(0,a.useState)({approveDeposit:!1,approveTransfer:!1,approveLoan:!1,reject:!1,delete:!1}),D=(0,a.useCallback)(async()=>{try{let{data:e}=await i.Z.get("/api/transactions/".concat(N));if(e.error)throw Error(e.error);s(e)}catch(e){c.Am.error(e.message)}},[N]);return((0,a.useEffect)(()=>{N&&D()},[D,N]),n)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex justify-center pb-7",children:(0,r.jsxs)("div",{className:"w-[500px] max-w-full p-5 \n        rounded-md shadow-md transition \n        flex flex-col items-center gap-7\n         ".concat("light"===e?"shadow-gray-200 hover:shadow-gray-300":" shadow-[#292929] hover:shadow-[#585858]"," "),children:[(0,r.jsx)(b.q,{color:"red",alt:"its me",size:"lg",radius:"xl",children:(0,r.jsx)(g.Mu3,{color:C})}),(0,r.jsxs)("div",{className:"w-full flex items-center gap-3",children:[(0,r.jsx)(l.Z,{onClick:()=>t.push("/admin/users/".concat(n.userId)),label:"Transaction Owner"}),((null==n?void 0:n.pendingBalance)||0==n.pendingBalance)&&(0,r.jsx)(l.Z,{onClick:()=>{},label:"Send Reminder Email"})]}),(0,r.jsxs)("div",{className:"flex flex-col w-full",children:[n&&(0,r.jsxs)("div",{className:"w-full flex justify-between items-center py-4 border-b",children:[(0,r.jsxs)("div",{children:[n.title,":"]}),(0,r.jsxs)("div",{children:[k,(0,v.Z)(n.amount)]})]}),((null==n?void 0:n.pendingBalance)||0==n.pendingBalance)&&(0,r.jsxs)("div",{className:"w-full flex justify-between items-center py-4 border-b",children:[(0,r.jsx)("div",{children:"Pending balance:"}),(0,r.jsxs)("div",{children:[k,(0,v.Z)(n.pendingBalance)]})]}),(null==n?void 0:n.senderName)&&(0,r.jsxs)("div",{className:"w-full flex justify-between items-center py-4 border-b",children:[(0,r.jsx)("div",{children:"Sender:"}),(0,r.jsx)("div",{children:n.senderName})]}),(null==n?void 0:n.walletAddress)&&(0,r.jsxs)("div",{className:"w-full flex justify-between items-center py-4 border-b",children:[(0,r.jsx)("div",{children:"Wallet Address:"}),(0,r.jsx)("div",{children:n.walletAddress})]}),(null==n?void 0:n.coinName)&&(0,r.jsxs)("div",{className:"w-full flex justify-between items-center py-4 border-b",children:[(0,r.jsx)("div",{children:"Coin Name:"}),(0,r.jsx)("div",{children:n.coinName})]}),(null==n?void 0:n.receiverName)&&(0,r.jsxs)("div",{className:"w-full flex justify-between items-center py-4 border-b",children:[(0,r.jsx)("div",{children:"Receiver:"}),(0,r.jsx)("div",{children:n.receiverName})]}),(null==n?void 0:n.receiverPaymentUsername)&&(0,r.jsxs)("div",{className:"w-full flex justify-between items-center py-4 border-b",children:[(0,r.jsxs)("div",{children:["Receiver's ",n.paymentTitle," Username:"]}),(0,r.jsx)("div",{children:n.receiverPaymentUsername})]}),(null==n?void 0:n.receiverEmail)&&(0,r.jsxs)("div",{className:"w-full flex justify-between items-center py-4 border-b",children:[(0,r.jsx)("div",{children:"Receiver's email:"}),(0,r.jsx)("div",{children:n.receiverEmail})]}),(null==n?void 0:n.receiverPhoneNumber)&&(0,r.jsxs)("div",{className:"w-full flex justify-between items-center py-4 border-b",children:[(0,r.jsx)("div",{children:"Receiver's Phone Number:"}),(0,r.jsx)("div",{children:n.receiverPhoneNumber})]}),(null==n?void 0:n.receiverAccountNumber)&&(0,r.jsxs)("div",{className:"w-full flex justify-between items-center py-4 border-b",children:[(0,r.jsx)("div",{children:"Receiver's Account Number:"}),(0,r.jsx)("div",{children:n.receiverAccountNumber})]}),(null==n?void 0:n.status)&&(0,r.jsxs)("div",{className:"w-full flex justify-between items-center py-4 border-b",children:[(0,r.jsx)("div",{children:"Status:"}),(0,r.jsx)("div",{children:n.status})]}),((null==n?void 0:n.amountToDeposit)||0===n.amountToDeposit)&&(0,r.jsxs)("div",{className:"w-full flex justify-between items-center py-4 border-b",children:[(0,r.jsx)("div",{children:"Amount to deposit:"}),(0,r.jsxs)("div",{children:[k,(0,v.Z)(n.amountToDeposit)]})]}),h&&(0,r.jsxs)("div",{className:"w-full flex justify-between items-center py-4 ",children:[(0,r.jsx)("div",{children:"Deposited amount so far:"}),(0,r.jsxs)("div",{children:[k,(0,v.Z)(Number(n.despositedAmount))]})]}),(null==n?void 0:n.loanReason)&&(0,r.jsxs)("div",{className:"w-full flex justify-between items-center py-4 border-b",children:[(0,r.jsx)("div",{children:"Loan Reason:"}),(0,r.jsx)("div",{children:n.loanReason})]}),(null==n?void 0:n.loanDuration)&&(0,r.jsxs)("div",{className:"w-full flex justify-between items-center py-4 border-b",children:[(0,r.jsx)("div",{children:"Loan Duration:"}),(0,r.jsx)("div",{children:n.loanDuration})]})]}),(null==n?void 0:n.category)==="deposit"&&(null==n?void 0:n.status)==="processing"&&(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{children:"Approving deposit transaction"}),(0,r.jsxs)("div",{className:"w-full flex justify-between gap-3 flex-col sm:flex-row",children:[(0,r.jsx)(l.Z,{label:"Approve Deposit",onClick:()=>T({...A,approveDeposit:!0})}),(0,r.jsx)(l.Z,{outline:!0,label:"Reject Deposit",onClick:()=>T({...A,reject:!0})})]})]}),(null==n?void 0:n.category)==="transfer"&&(null==n?void 0:n.status)==="processing"&&(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{children:"Approving external Transafer"}),(0,r.jsxs)("div",{className:"w-full flex justify-between gap-3 flex-col sm:flex-row",children:[(0,r.jsx)(l.Z,{label:"Aprove",onClick:()=>T({...A,approveTransfer:!0})}),(0,r.jsx)(l.Z,{outline:!0,label:"Reject",onClick:()=>T({...A,reject:!0})})]})]}),(null==n?void 0:n.category)==="loan"&&(null==n?void 0:n.status)==="processing"&&(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{children:"Aproving Loan transactions"}),(0,r.jsxs)("div",{className:"w-full flex justify-between gap-3 flex-col sm:flex-row",children:[(0,r.jsx)(l.Z,{label:"Aprove",onClick:()=>T({...A,approveLoan:!0})}),(0,r.jsx)(l.Z,{outline:!0,label:"Reject",onClick:()=>T({...A,reject:!0})})]})]}),n.linkedTransactionId&&(0,r.jsx)(l.Z,{onClick:()=>t.push("/admin/transactions/".concat(n.linkedTransactionId)),label:"linked transaction"}),(null==n?void 0:n.paymentProof)&&(0,r.jsx)(y.bz,{width:n.paymentProof.width,height:n.paymentProof.height,alt:n.paymentProof.original_filename,src:n.paymentProof.public_id,onError:e=>{console.log(e),c.Am.error("seems somthings went wrong getting your image. Upload new one or try reloading the page")}}),(null==n?void 0:n.note)&&(0,r.jsxs)("div",{className:"w-full rounded-md shadow-md \n            p-2\n          ".concat("light"===e?"shadow-gray-200 hover:shadow-gray-300":" shadow-[#292929] hover:shadow-[#585858]"),children:["Note : ",n.note]}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{children:"Delete or edit this transaction"}),(0,r.jsxs)("div",{className:"w-full flex justify-between gap-3 flex-col sm:flex-row",children:[(0,r.jsx)(l.Z,{label:"Delete",onClick:()=>T({...A,delete:!0})}),(0,r.jsx)(l.Z,{disabled:!0,outline:!0,label:"Edit",onClick:()=>{}})]})]})]})}),(0,r.jsx)(u,{opened:A.approveDeposit,transaction:n,onClose:()=>T({...A,approveDeposit:!1})}),(0,r.jsx)(p,{opened:A.reject,transaction:n,onClose:()=>T({...A,reject:!1})}),(0,r.jsx)(f,{opened:A.approveTransfer,transaction:n,onClose:()=>T({...A,approveTransfer:!1})}),(0,r.jsx)(x,{opened:A.approveLoan,transaction:n,onClose:()=>T({...A,approveLoan:!1})}),(0,r.jsx)(d,{opened:A.delete,transaction:n,onClose:()=>T({...A,delete:!1})})]}):(0,r.jsx)("div",{className:"w-full flex justify-center",children:(0,r.jsx)(j.a,{color:C})})}},3338:function(e,t,n){"use strict";var r=n(9268),l=n(41557);n(86006);var s=n(32131);t.Z=e=>{let{label:t,onClick:n,disabled:i,outline:o,small:a,icon:c,loading:d,type:u,primaryColor:h}=e,{company:p}=(0,s.Z)();return null!=h||null==p||p.color.primary,null==p||p.color.primaryVeryLight,(0,r.jsxs)("button",{type:u,style:{backgroundColor:"#9D00FF"},onClick:n,disabled:i||d,className:"relative disabled:opacity-70 disabled:cursor-not-allowed \n      rounded-lg hover:opacity-80 transition \n      w-full disabled:active:scale-[1] active:scale-[.95] \n      flex justify-center items-center gap-2 \n      ".concat(o?"text-slate-700":"text-white"," \n      ").concat(a?"h-[40px]":"h-[55px]"," \n      ").concat(a?"text-sm":" text-base"," \n      ").concat(a?"font-light":"font-semibold"," \n      ").concat(a?"border-[1px]":"border-2"),children:[!d&&t,c&&!d&&(0,r.jsx)(c,{size:24}),d&&(0,r.jsx)(l.a,{size:24,color:o?h:"#ffff"})]})}},88001:function(e,t,n){"use strict";var r=n(9268),l=n(86006),s=n(32131);t.Z=e=>{let{maxLength:t,disabled:n,value:i,onChange:o,secureEntry:a,placeholder:c,icon:d,iconAction:u,id:h}=e,[p,x]=(0,l.useState)(!1),{company:f}=(0,s.Z)();null==f||f.color.primary,null==f||f.color.primaryLight;let m=null==f?void 0:f.color.primaryVeryLight;return(0,r.jsxs)("div",{style:{backgroundColor:"white",borderColor:m},"aria-disabled":!0,className:"flex justify-between w-full \n    items-center px-3 rounded-lg border \n    ".concat(n&&"bg-gray-100 cursor-not-allowed"),children:[(0,r.jsx)("input",{maxLength:t,onFocus:()=>x(!0),onBlur:()=>x(!1),disabled:n,id:h,type:a?"password":"text",placeholder:c,value:i,onChange:o,className:"py-4 outline-none w-full \n        h-full pr-2 bg-inherit \n        text-gray-500 font-semibold \n        disabled:cursor-not-allowed"}),d&&(0,r.jsx)(d,{onClick:u,size:24,className:"cursor-pointer text-gray-600"})]})}},32131:function(e,t,n){"use strict";var r=n(82561);let l=(0,r.Ue)(e=>({company:null,onCompany:t=>e({company:t})}));t.Z=l},22450:function(e,t,n){"use strict";var r=n(82561);let l=()=>{let e=localStorage.getItem("theme-mode");return e&&"light"!==e?"dark":"light"},s=()=>(localStorage.setItem("theme-mode","dark"),{mode:"dark"}),i=()=>(localStorage.setItem("theme-mode","light"),{mode:"light"}),o=(0,r.Ue)(e=>({mode:"light",onDarkMode:()=>e(s),onLightMode:()=>e(i),onInitialMode:()=>e({mode:l()})}));t.Z=o},17915:function(e,t,n){"use strict";var r=n(9268),l=n(40931);n(86006);var s=n(22450);t.Z=e=>{let{opened:t,onClose:n,size:i,title:o,children:a,fullScreen:c}=e,{mode:d}=(0,s.Z)();return(0,r.jsx)(l.u,{fullScreen:c,opened:t,onClose:n,title:o,centered:!0,size:i||"md",classNames:{header:"".concat("light"===d?"bg-white text-slate-700":"bg-[#121212] text-white"),body:"".concat("light"===d?"bg-white":"bg-[#121212]"),content:"".concat("light"===d?"text-slate-700":"text-white"),title:"font-semibold text-lg text-black"},children:a})}},19799:function(e,t){"use strict";t.Z=e=>e.toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})},66003:function(e){!function(){var t={229:function(e){var t,n,r,l=e.exports={};function s(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var a=[],c=!1,d=-1;function u(){c&&r&&(c=!1,r.length?a=r.concat(a):d=-1,a.length&&h())}function h(){if(!c){var e=o(u);c=!0;for(var t=a.length;t;){for(r=a,a=[];++d<t;)r&&r[d].run();d=-1,t=a.length}r=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function x(){}l.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new p(e,t)),1!==a.length||c||o(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=x,l.addListener=x,l.once=x,l.off=x,l.removeListener=x,l.removeAllListeners=x,l.emit=x,l.prependListener=x,l.prependOnceListener=x,l.listeners=function(e){return[]},l.binding=function(e){throw Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw Error("process.chdir is not supported")},l.umask=function(){return 0}}},n={};function r(e){var l=n[e];if(void 0!==l)return l.exports;var s=n[e]={exports:{}},i=!0;try{t[e](s,s.exports,r),i=!1}finally{i&&delete n[e]}return s.exports}r.ab="//";var l=r(229);e.exports=l}()}},function(e){e.O(0,[5625,2815,1114,931,6394,4941,2854,9253,2961,1744],function(){return e(e.s=51381)}),_N_E=e.O()}]);